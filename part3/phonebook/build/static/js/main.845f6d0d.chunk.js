(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),u=t(2),i=function(e){var n=e.setFilter;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{onChange:function(e){n(e.target.value)}}))},l=t(4),f=t(3),m=t.n(f),s="/api/persons",d=function(){return m.a.get(s).then((function(e){return e.data}))},b=function(e){return m.a.post(s,e).then((function(e){return e.data}))},p=function(e,n){return m.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},v=function(e,n,t){var a=t.toLowerCase();return"undefined"!==typeof e.find((function(e){return e[n].toLowerCase()===a}))},E=function(e){var n=e.persons,t=e.setPersons,o=e.setNotification,c=Object(a.useState)(""),i=Object(u.a)(c,2),f=i[0],m=i[1],s=Object(a.useState)(""),d=Object(u.a)(s,2),h=d[0],E=d[1];return r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),""!==f&&""!==h)if(v(n,"number",h))alert("Number ".concat(h," is already added to phonebook"));else if(v(n,"name",f)){var a=n.find((function(e){return e.name===f}));if(window.confirm(a.name+" already exists, update number?")){var r=Object(l.a)(Object(l.a)({},a),{},{number:h});p(a.id,r).then((function(e){t(n.map((function(n){return n.id!==a.id?n:e}))),m(""),E("")})).catch((function(e){alert("couldn't change number to phonebook on server")}))}}else{b({name:f,number:h}).then((function(e){t(n.concat(e)),m(""),E(""),o({message:"Added ".concat(e.name),type:"notification"}),setTimeout((function(){o(null)}),5e3)})).catch((function(e){alert("couldn't add person to phonebook on server")}))}}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:f,onChange:function(e){m(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:h,onChange:function(e){E(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},g=function(e){var n=e.name,t=e.number,a=e.deletePerson;return r.a.createElement("div",null,n," ",t," ",r.a.createElement("button",{onClick:a},"delete"))},j=function(e){var n=e.notification;return null===n?null:"notification"===n.type?r.a.createElement("div",{className:"notification"},n.message):"error"===n.type?r.a.createElement("div",{className:"error"},n.message):void 0},w=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),l=Object(u.a)(c,2),f=l[0],m=l[1],s=Object(a.useState)(null),b=Object(u.a)(s,2),p=b[0],v=b[1];Object(a.useEffect)((function(){d().then((function(e){o(e)})).catch((function(e){alert("couldn't retrieve phonebook from server")}))}),[]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(j,{notification:p}),r.a.createElement(i,{setFilter:m}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(E,{persons:t,setPersons:o,setNotification:v}),r.a.createElement("h2",null,"Numbers"),function(e,n,t){var a=t.toLowerCase();return e.filter((function(e){return e[n].toLowerCase().includes(a)}))}(t,"name",f).map((function(e){return r.a.createElement(g,{key:e.name,name:e.name,number:e.number,deletePerson:function(){return function(e){window.confirm("Delete "+e.name+"?")&&h(e.id).then((function(){return o(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){v({message:"couldn't delete '".concat(e.name,"' from server"),type:"error"}),setTimeout((function(){v(null)}),5e3),o(t.filter((function(n){return n.name!==e.name})))}))}(e)}})})))};t(37);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.845f6d0d.chunk.js.map